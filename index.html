<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed Package Verification</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(to bottom, #f0f9f4, #e0f2e9);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
        }
        .error-shake {
            animation: shake 0.3s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6 sm:p-8">
        <div id="input-section">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-4 text-center">
                Verify Your Mobile Number
            </h1>
            <p class="text-gray-600 mb-6 text-center text-sm sm:text-base">
                Enter your 10-digit mobile number to access product details
            </p>
            <div class="mb-4">
                <input
                    type="tel"
                    id="mobile-number"
                    placeholder="Enter 10-digit mobile number"
                    maxlength="10"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                >
                <p id="error-message" class="text-red-500 text-sm mt-2 hidden">
                    Please enter a valid 10-digit mobile number
                </p>
            </div>
            <button
                id="submit-button"
                class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition duration-300 font-semibold"
            >
                Send OTP
            </button>
        </div>

        <div id="otp-section" class="hidden">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-4 text-center">
                Enter OTP
            </h1>
            <p class="text-gray-600 mb-6 text-center text-sm sm:text-base">
                We've sent an OTP to your mobile number
            </p>
            <div class="mb-4">
                <input
                    type="text"
                    id="otp-input"
                    placeholder="Enter OTP"
                    maxlength="6"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                >
                <p id="otp-error" class="text-red-500 text-sm mt-2 hidden">
                    Invalid OTP. Please try again.
                </p>
            </div>
            <div class="flex justify-between items-center mb-4">
                <p id="timer" class="text-gray-600 text-sm">Resend OTP in <span id="countdown">60</span>s</p>
                <button
                    id="resend-button"
                    class="text-green-600 font-semibold text-sm hover:underline hidden"
                >
                    Resend OTP
                </button>
            </div>
            <button
                id="verify-button"
                class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition duration-300 font-semibold"
            >
                Verify OTP
            </button>
        </div>

        <div id="success-section" class="hidden">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-4 text-center">
                Verification Successful
            </h1>
            <p class="text-gray-600 mb-6 text-center text-sm sm:text-base">
                Access your package details and connect with us
            </p>
            <div class="space-y-4">
                <a
                    href="https://example.com/package.pdf"
                    target="_blank"
                    class="block w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300 font-semibold text-center"
                >
                    View Package Details (PDF)
                </a>
                <a
                    href="https://wa.me/+1234567890"
                    target="_blank"
                    class="block w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition duration-300 font-semibold text-center"
                >
                    Chat on WhatsApp
                </a>
                <a
                    href="tel:+1234567890"
                    class="block w-full bg-gray-800 text-white py-3 rounded-lg hover:bg-gray-900 transition duration-300 font-semibold text-center"
                >
                    Call Us
                </a>
            </div>
        </div>
    </div>

    <script>
        const mobileInput = document.getElementById('mobile-number');
        const submitButton = document.getElementById('submit-button');
        const errorMessage = document.getElementById('error-message');
        const inputSection = document.getElementById('input-section');
        const otpSection = document.getElementById('otp-section');
        const otpInput = document.getElementById('otp-input');
        const verifyButton = document.getElementById('verify-button');
        const successSection = document.getElementById('success-section');
        const timer = document.getElementById('timer');
        const countdown = document.getElementById('countdown');
        const resendButton = document.getElementById('resend-button');
        const otpError = document.getElementById('otp-error');

        let countdownTimer;

        submitButton.addEventListener('click', async () => {
            const mobile = mobileInput.value.trim();
            if (!/^\d{10}$/.test(mobile)) {
                errorMessage.classList.remove('hidden');
                mobileInput.classList.add('error-shake');
                setTimeout(() => mobileInput.classList.remove('error-shake'), 300);
                return;
            }

            errorMessage.classList.add('hidden');
            try {
                const response = await fetch('https://your-lambda-endpoint.aws', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ mobile })
                });
                if (response.ok) {
                    inputSection.classList.add('hidden');
                    otpSection.classList.remove('hidden');
                    startTimer();
                } else {
                    errorMessage.textContent = 'Failed to send OTP. Try again.';
                    errorMessage.classList.remove('hidden');
                }
            } catch (error) {
                errorMessage.textContent = 'Network error. Please try again.';
                errorMessage.classList.remove('hidden');
            }
        });

        verifyButton.addEventListener('click', async () => {
            const otp = otpInput.value.trim();
            if (!/^\d{4,6}$/.test(otp)) {
                otpError.classList.remove('hidden');
                otpInput.classList.add('error-shake');
                setTimeout(() => otpInput.classList.remove('error-shake'), 300);
                return;
            }

            try {
                const response = await fetch('https://your-lambda-endpoint.aws/verify', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ mobile: mobileInput.value, otp })
                });
                if (response.ok) {
                    otpSection.classList.add('hidden');
                    successSection.classList.remove('hidden');
                    clearInterval(countdownTimer);
                } else {
                    otpError.classList.remove('hidden');
                }
            } catch (error) {
                otpError.textContent = 'Network error. Please try again.';
                otpError.classList.remove('hidden');
            }
        });

        resendButton.addEventListener('click', async () => {
            resendButton.classList.add('hidden');
            timer.classList.remove('hidden');
            await submitButton.click();
        });

        function startTimer() {
            let timeLeft = 60;
            countdown.textContent = timeLeft;
            countdownTimer = setInterval(() => {
                timeLeft--;
                countdown.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(countdownTimer);
                    timer.classList.add('hidden');
                    resendButton.classList.remove('hidden');
                }
            }, 1000);
        }
    </script>
</body>
</html>